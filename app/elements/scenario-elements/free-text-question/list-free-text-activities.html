<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../remove-ressource-element/remove-ressource.html">
<link rel="import" href="../../../bower_components/paper-material/paper-material.html">
<link rel="import" href="./free-text-question.html">
<dom-module id="list-free-text-activities">
    <template>
        <style include="shared-styles">

    .previewquestion {
            display: inline-flex;
            flex-grow: 2;
            padding: 10px;
            box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.4);

    }

        </style>
        <iron-collapse style="display:inline-flex;flex-wrap: wrap;" id="icollapse">
            <iron-ajax id="ajaxLoader" url="{{url}}" handle-as="json" last-response="{{items}}"></iron-ajax>
            <template is="dom-repeat" items="{{items}}" as="item">
                <template is=dom-if if="{{item.imageId}}">
                    <free-text-question image-style="height:300px;align-self:center;" class="previewquestion" question="{{item.question}}" image-id=/file/{{item.imageId}} wrong-answer="Batard" correct-answer="cool" response="bien" response-label="Entrez la réponse"></free-text-question>
                </template>
            </template>
            <iron-ajax id="ajaxLoader2" url="{{url}}" handle-as="json" last-response="{{items}}"></iron-ajax>
            <template is="dom-repeat" items="{{items}}" as="item">
                <template is=dom-if if="!{{imageId}}">
                    <free-text-question image-style="height:300px;align-self:center;" class="previewquestion" style="margin-left:15px;margin-top: 15px; border:1px solid black;" class="test" question="{{item.question}}"  wrong-answer="Batard" correct-answer="cool" response="bien" response-label="Entrez la réponse"></free-text-question>
                </template>
            </template>
        </iron-collapse>
    </template>
    <script>
    (function() {
        'use strict';

        Polymer({
            is: 'list-free-text-activities',
            ready: function() {
                this.set('callback', function() {
                    this.$.ajaxLoader.generateRequest();
                }.bind(this));
            },
            getList: function() {
                this.$.ajaxLoader.generateRequest();
                this.$.ajaxLoader2.generateRequest();
                this.$.icollapse.toggle();
                    
            },
            properties: {
                url: {
                    type: String,
                    notify: true
                },
                state:{
                    type:Boolean,
                    notify:true,
                    value:false,
                }
            }
        });
    })();
    </script>
</dom-module>
