<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="./google-map-marker-icons.html">

<dom-module id="poi-map-representation">
    <template>
        <style>
        :host {
            display: inline-flex;
            margin: 10px;
        }
        
        ;
        .innerdiv {
            display: inline-flex;
            flex-flow: column;
            align-items: baseline;
            flex-wrap: wrap;
        }
        
        paper-material.flexible {
            display: inline-flex;
            flex-wrap: wrap;
            flex-direction: column;
        }
        
        .insideflex {
            display: inline-flex;
            flex-direction: row;
            align-self: stretch;
            justify-content: space-between;
            ;
        }
        
        paper-button.small {
            display: inline-flex;
            font-size: medium;
            padding: 0.42em 0.57em;
        }
        
        .innerdiv>paper-button {
            margin-bottom: 20px;
            margin-top: 20px;
        }
        
        .smallh3 {
            display: inline-flex;
            align-self: center;
            margin-bottom: 3px;
        }
        
        .innerdiv>* {
            margin-left: 10px;
            margin-right: 10px;
        }
        </style>
        <paper-material class="flexible" elevation="2">
            <div class=innerdiv>
                <h3 class="smallh3">Edit POI</h3>
                <paper-input style="display:inline-flex;margin-bottom: 10px " name="name" value={{title}} label="Title"></paper-input>
                <paper-input style="display:inline-flex;margin-bottom: 10px" name="Information" value={{info}} label="Information"></paper-input>
                <div class="insideflex" style="">
                    <paper-button noink on-click="openDialog" raised class="small" style="align-self: center;margin-right: 15px;" name="Iconpick">Change icon</paper-button><img style="display:inline-flex" src="{{mapicon}}">
                </div>
                <paper-button name class="small" raised "setImage">Add image</paper-button>
                <div class=insideflex style="margin-bottom: 10px">
                    <paper-button noink style="background-color: #b2ffa6" name="save" class="small" raised>Save marker</paper-button>
                    <paper-button noink style="background-color: rgba(231, 25, 25, 0.25)" name="delete" on-click="removeMark" class="small" raised>Delete marker</paper-button>
                </div>
            </div>
        </paper-material>
        <paper-dialog id="icons">
            <h2>Select icon</h2>
              <paper-dialog-scrollable>

            <div><map-icons icon={{mapicon}}></map-icons></div>
                </paper-dialog-scrollable>
        </paper-dialog>
    </template>
    <script>
    (function() {
        'use strict';

        Polymer({
            is: 'poi-map-representation',

            openDialog:function(){
                this.$.icons.open();
            },

            removeMark:function(elem){
                this.fire('remove-marker',{latitude:this.latitude,longitude:this.longitude})
            },
            _mapiconobs:function(newval,oldval){
                this.set('icon',newval);
                this.$.icons.close();
            },

            ready: function() {

            },


            properties: {
                title: {
                    type: String,
                    reflectToAttribute: true,
                    notify: true,
                },
                info: {
                    type: String
                } ,
                icon: {
                    type: String,
                    reflectToAttribute: true,
                    notify: true,
                },
                mapicon: {
                    type: String,
                    notify: true,
                    observer:'_mapiconobs'
                },
                latitude:{
                    type:Number,
                },
                longitude:{
                    type:Number,
                },


            }
        })
    })();
    </script>
</dom-module>
