<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<dom-module id="distance-elem">
  <template>
    <content>
      <geo-location id="geo" watch-pos high-accuracy latitude="{{ latitude }}" longitude="{{ longitude }}"></geo-location>
    </content>

  </template>
</dom-module>

<script>

  Polymer({

    is: 'distance-elem',
    ready:function(){     var loc = this.$.geo;
      loc.fetch();

      this.addEventListener('geo-response',this.distancecalc)
    },

    changeDestLat(newval, old){
      this.set('destinationLatitude',newval);
      console.log(newval)
    },
    changeDestLong(newval, old){
      this.set('destinationLongitude',newval);
      console.log(newval)
    },

    distancecalc:function(){
      this.set('distance',distance(this.latitude,this.longitude,this.destinationLatitude,this.destinationLongitude,'K'));
      console.log(this.distance)
      console.log(this.destinationLatitude);
      console.log(this.destinationLongitude);
      console.log(this.latitude);
      console.log(this.longitude);
    },

    properties:{
      distance:{type :Number,notify:true,
        reflectToAttribute: true},
      destinationLatitude:{type:Number,notify:true,value:0,observer:'changeDestLat'},
        destinationLongitude:{type:Number,notify:true,value:0,observer:'changeDestLong'},
      latitude:{type:Number,notify:true},
      longitude:{type:Number,notify:true},
    }



  });

</script>
